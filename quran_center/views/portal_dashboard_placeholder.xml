<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Portal Dashboard Template -->
    <template id="portal_student_dashboard" name="Student Dashboard">
        <t t-call="website.layout">
            <t t-set="title">لوحة التحكم</t>
            <div class="container mt-5">
                <div class="row">
                    <div class="col-12">
                        <h2>مرحباً <t t-esc="student.name_ar"/></h2>
                        <p>رقم الطالب: <t t-esc="student.student_code"/></p>

                        <div class="row mt-4">
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h3><t t-esc="attendance_rate"/>%</h3>
                                        <p>نسبة الحضور</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h3><t t-esc="len(student.class_ids)"/></h3>
                                        <p>عدد الصفوف</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h3><t t-esc="total_sessions"/></h3>
                                        <p>إجمالي الجلسات</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h3><t t-esc="student.current_memorized_pages"/></h3>
                                        <p>الصفحات المحفوظة</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4">
                            <a href="/my/sessions" class="btn btn-primary">الجلسات</a>
                            <a href="/my/classes" class="btn btn-info">الصفوف</a>
                            <a href="/my/profile" class="btn btn-secondary">الملف الشخصي</a>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Portal Student Sessions Template -->
    <template id="portal_student_sessions" name="Student Sessions">
        <t t-call="website.layout">
            <t t-set="title">الجلسات</t>
            <div class="container mt-5">
                <div class="row">
                    <div class="col-12">
                        <h2>الجلسات</h2>

                        <ul class="nav nav-tabs mb-4">
                            <li class="nav-item">
                                <a class="nav-link" href="/my/sessions/upcoming">القادمة</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/my/sessions/today">اليوم</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/my/sessions/past">السابقة</a>
                            </li>
                        </ul>

                        <t t-if="sessions">
                            <t t-foreach="sessions" t-as="attendance">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <h5><t t-esc="attendance.session_id.name"/></h5>
                                        <p>التاريخ: <t t-esc="attendance.session_id.session_date"/></p>
                                        <p>الصف: <t t-esc="attendance.session_id.class_id.name"/></p>
                                        <t t-if="attendance.session_id.class_session_type == 'Online' and attendance.session_id.is_meeting_active">
                                            <a t-attf-href="/my/session/#{attendance.id}/join" class="btn btn-success">
                                                دخول الجلسة
                                            </a>
                                        </t>
                                    </div>
                                </div>
                            </t>
                        </t>
                        <t t-else="">
                            <p>لا توجد جلسات</p>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Portal Student Classes Template -->
    <template id="portal_student_classes" name="Student Classes">
        <t t-call="website.layout">
            <t t-set="title">الصفوف</t>
            <div class="container mt-5">
                <div class="row">
                    <div class="col-12">
                        <h2>الصفوف</h2>
                        <t t-if="classes">
                            <t t-foreach="classes" t-as="class_item">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <h5><t t-esc="class_item.name"/></h5>
                                        <p>الكود: <t t-esc="class_item.code"/></p>
                                        <p>المعلم: <t t-esc="class_item.teacher_id.name"/></p>
                                        <p>النوع: <t t-esc="class_item.class_session_type == 'Online' and 'أونلاين' or 'حضوري'"/></p>
                                    </div>
                                </div>
                            </t>
                        </t>
                        <t t-else="">
                            <p>لا توجد صفوف</p>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Portal Student Profile Template -->
    <template id="portal_student_profile" name="Student Profile">
        <t t-call="website.layout">
            <t t-set="title">الملف الشخصي</t>
            <div class="container mt-5">
                <div class="row">
                    <div class="col-12">
                        <h2>الملف الشخصي</h2>
                        <div class="card">
                            <div class="card-body">
                                <p><strong>رقم الطالب:</strong> <t t-esc="student.student_code"/></p>
                                <p><strong>الاسم بالعربية:</strong> <t t-esc="student.name_ar"/></p>
                                <p><strong>الاسم بالإنجليزية:</strong> <t t-esc="student.name_en"/></p>
                                <p><strong>البريد الإلكتروني:</strong> <t t-esc="student.email"/></p>
                                <p><strong>تاريخ الميلاد:</strong> <t t-esc="student.birth_date"/></p>
                                <p><strong>العمر:</strong> <t t-esc="student.age"/> سنة</p>
                                <p><strong>الصفحات المحفوظة:</strong> <t t-esc="student.current_memorized_pages"/></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>