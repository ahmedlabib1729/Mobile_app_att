<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- Payment Provider: COD -->
        <record id="payment_provider_cod" model="payment.provider">
            <field name="name">Cash on Delivery</field>
            <field name="code">cod</field>
            <field name="state">disabled</field>
            <field name="company_id" ref="base.main_company"/>
            <field name="module_id" ref="base.module_payment_cod"/>
            <field name="allow_tokenization" eval="False"/>
            <field name="support_manual_capture" eval="False"/>
            <field name="cod_instructions">Payment will be collected upon delivery of your order. Please have the exact amount ready.</field>
        </record>

        <!-- Example Country Fees (disabled by default) -->
        <record id="cod_fee_egypt" model="cod.country.fee">
            <field name="provider_id" ref="payment_provider_cod"/>
            <field name="country_id" ref="base.eg"/>
            <field name="fee_type">fixed</field>
            <field name="fee_amount">30</field>
            <field name="currency_id" ref="base.EGP"/>
            <field name="active" eval="False"/>
            <field name="instructions">التوصيل خلال 3-5 أيام عمل. يرجى تحضير المبلغ المطلوب عند الاستلام.</field>
        </record>

        <record id="cod_fee_saudi" model="cod.country.fee">
            <field name="provider_id" ref="payment_provider_cod"/>
            <field name="country_id" ref="base.sa"/>
            <field name="fee_type">percentage</field>
            <field name="fee_percentage">2.0</field>
            <field name="currency_id" ref="base.SAR"/>
            <field name="active" eval="False"/>
            <field name="instructions">التوصيل خلال 2-4 أيام عمل. رسوم الدفع عند الاستلام 2% من قيمة الطلب.</field>
        </record>

        <record id="cod_fee_uae" model="cod.country.fee">
            <field name="provider_id" ref="payment_provider_cod"/>
            <field name="country_id" ref="base.ae"/>
            <field name="fee_type">fixed</field>
            <field name="fee_amount">15</field>
            <field name="currency_id" ref="base.AED"/>
            <field name="min_amount">50</field>
            <field name="max_amount">5000</field>
            <field name="active" eval="False"/>
            <field name="instructions">التوصيل خلال 1-3 أيام عمل. الحد الأدنى للطلب 50 درهم.</field>
        </record>
    </data>

    <!-- Update COD provider with image after creation -->
    <function model="payment.provider" name="write">
        <value eval="[ref('payment_provider_cod')]"/>
        <value eval="{'image_128': False}"/>
    </function>
</odoo>