<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- قائمة النوادي -->
    <template id="clubs_list" name="قائمة النوادي">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <section class="s_title pt40 pb40">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 text-center">
                                <h1>النوادي التعليمية</h1>
                                <p class="lead">اكتشف نوادينا التعليمية المختلفة واختر الأنسب لأطفالك</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="s_clubs pb40">
                    <div class="container">
                        <div class="row">
                            <t t-foreach="clubs" t-as="club">
                                <div class="col-lg-4 col-md-6 mb-4">
                                    <div class="card h-100 shadow-sm">
                                        <t t-if="club.image">
                                            <img t-att-src="image_data_uri(club.image)"
                                                 class="card-img-top"
                                                 t-att-alt="club.name"
                                                 style="height: 200px; object-fit: cover;"/>
                                        </t>
                                        <t t-else="">
                                            <div class="card-img-top bg-gradient text-white d-flex align-items-center justify-content-center"
                                                 style="height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                                <i class="fa fa-graduation-cap fa-4x"/>
                                            </div>
                                        </t>
                                        <div class="card-body">
                                            <h4 class="card-title">
                                                <a t-att-href="'/clubs/%s' % slug(club)" t-field="club.name"/>
                                            </h4>
                                            <p class="card-text" t-field="club.description"/>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-primary">
                                                    <t t-esc="club.active_program_count"/> برنامج نشط
                                                </span>
                                                <a t-att-href="'/clubs/%s' % slug(club)"
                                                   class="btn btn-primary btn-sm">
                                                    عرض البرامج
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>

                        <t t-if="pager['page_count'] > 1">
                            <div class="row">
                                <div class="col-lg-12">
                                    <t t-call="website.pager"/>
                                </div>
                            </div>
                        </t>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <!-- تفاصيل النادي -->
    <template id="club_details" name="تفاصيل النادي">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <section class="s_programs pt40 pb40">
                    <div class="container">
                        <div class="row mb-4">
                            <div class="col-lg-12">
                                <h1 class="text-center" t-field="club.name"/>
                                <t t-if="club.vision">
                                    <p class="lead text-center text-muted" t-field="club.vision"/>
                                </t>
                                <hr class="my-4"/>
                                <h2 class="text-center mb-4">البرامج المتاحة</h2>
                            </div>
                        </div>

                        <div class="row">
                            <t t-if="not programs">
                                <div class="col-lg-12 text-center">
                                    <div class="alert alert-info">
                                        <i class="fa fa-info-circle"/> لا توجد برامج متاحة حالياً في هذا النادي
                                    </div>
                                </div>
                            </t>

                            <t t-foreach="programs" t-as="program">
                                <div class="col-lg-6 mb-4">
                                    <div class="card h-100 shadow border-0">
                                        <div class="card-header bg-gradient text-white py-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                            <h4 class="mb-0 text-center" t-field="program.name"/>
                                        </div>
                                        <div class="card-body">
                                            <t t-if="program.description">
                                                <p class="card-text" t-field="program.description"/>
                                            </t>
                                            <t t-if="program.vision">
                                                <p class="text-muted small mb-3">
                                                    <i class="fa fa-quote-left me-1"></i>
                                                    <span t-field="program.vision"/>
                                                </p>
                                            </t>

                                            <div class="row mb-3">
                                                <div class="col-6">
                                                    <i class="fa fa-calendar text-primary"/>
                                                    <strong>الجدول:</strong><br/>
                                                    <span t-field="program.schedule_display"/>
                                                </div>
                                                <div class="col-6">
                                                    <i class="fa fa-child text-primary"/>
                                                    <strong>العمر:</strong><br/>
                                                    <t t-esc="program.age_from"/> - <t t-esc="program.age_to"/> سنة
                                                    <t t-if="program.gender != 'both'">
                                                        (<t t-if="program.gender == 'male'">ذكور</t>
                                                        <t t-else="">إناث</t>)
                                                    </t>
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <div class="col-6">
                                                    <i class="fa fa-users text-primary"/>
                                                    <strong>المقاعد:</strong><br/>
                                                    <t t-if="program.is_full">
                                                        <span class="badge bg-danger">ممتلئ</span>
                                                    </t>
                                                    <t t-else="">
                                                        <span class="badge bg-success">
                                                            <t t-esc="program.available_seats"/> مقعد متاح
                                                        </span>
                                                    </t>
                                                </div>
                                                <div class="col-6">
                                                    <i class="fa fa-money text-primary"/>
                                                    <strong>الأسعار:</strong><br/>
                                                    <small>
                                                        الترم الأول : <t t-esc="program.term1_price"
                                                               t-options='{"widget": "monetary", "display_currency": program.currency_id}'/><br/>
                                                       الترم الثانى : <t t-esc="program.term2_price"
                                                               t-options='{"widget": "monetary", "display_currency": program.currency_id}'/><br/>
                                                        الترم الثالث : <t t-esc="program.term3_price"
                                                               t-options='{"widget": "monetary", "display_currency": program.currency_id}'/>
                                                    </small>
                                                </div>
                                            </div>

                                            <div class="text-center">
                                                <a t-att-href="'/programs/%s' % slug(program)"
                                                   class="btn btn-primary">
                                                    عرض التفاصيل
                                                </a>
                                                <t t-if="not program.is_full and program.state == 'open'">
                                                    <a t-att-href="'/programs/%s/register' % slug(program)"
                                                       class="btn btn-success">
                                                        سجل الآن
                                                    </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </section>

                <t t-if="club.phone or club.email or club.website">
                    <section class="s_contact bg-light pt40 pb40">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="text-center mb-4">معلومات الاتصال</h3>
                                    <div class="text-center">
                                        <t t-if="club.phone">
                                            <p><i class="fa fa-phone"/> <span t-field="club.phone"/></p>
                                        </t>
                                        <t t-if="club.email">
                                            <p><i class="fa fa-envelope"/> <span t-field="club.email"/></p>
                                        </t>
                                        <t t-if="club.website">
                                            <p><i class="fa fa-globe"/> <a t-att-href="club.website" t-field="club.website"/></p>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </t>
            </div>
        </t>
    </template>

    <!-- تفاصيل البرنامج -->
    <template id="program_details" name="تفاصيل البرنامج">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <section class="s_breadcrumb pt20 pb20 bg-light">
                    <div class="container">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item"><a href="/clubs">النوادي</a></li>
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/clubs/%s' % slug(club)" t-field="club.name"/>
                                </li>
                                <li class="breadcrumb-item active" t-field="program.name"/>
                            </ol>
                        </nav>
                    </div>
                </section>

                <section class="s_program_details pt40 pb40">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8">
                                <h1 t-field="program.name"/>

                                <div class="card mb-4">
                                    <div class="card-body">
                                        <h3>الرؤية والأهداف</h3>
                                        <p t-field="program.vision"/>

                                        <t t-if="program.description">
                                            <h3>وصف البرنامج</h3>
                                            <p t-field="program.description"/>
                                        </t>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body">
                                        <h3>الأسعار</h3>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>الفترة</th>
                                                    <th>السعر</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>الترم الأول</td>
                                                    <td>
                                                        <t t-esc="program.term1_price"
                                                           t-options='{"widget": "monetary", "display_currency": program.currency_id}'/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>الترم الثاني</td>
                                                    <td>
                                                        <t t-esc="program.term2_price"
                                                           t-options='{"widget": "monetary", "display_currency": program.currency_id}'/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>الترم الثالث</td>
                                                    <td>
                                                        <t t-esc="program.term3_price"
                                                           t-options='{"widget": "monetary", "display_currency": program.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h4>معلومات البرنامج</h4>

                                        <dl>
                                            <dt><i class="fa fa-calendar"/> الجدول</dt>
                                            <dd t-field="program.schedule_display"/>

                                            <dt><i class="fa fa-child"/> الفئة العمرية</dt>
                                            <dd>
                                                <t t-esc="program.age_from"/> - <t t-esc="program.age_to"/> سنة
                                                <t t-if="program.gender != 'both'">
                                                    <br/>
                                                    <span class="badge bg-info">
                                                        <t t-if="program.gender == 'male'">ذكور فقط</t>
                                                        <t t-else="">إناث فقط</t>
                                                    </span>
                                                </t>
                                            </dd>

                                            <dt><i class="fa fa-calendar-check-o"/> تاريخ البداية</dt>
                                            <dd t-field="program.start_date"/>

                                            <dt><i class="fa fa-calendar-times-o"/> تاريخ النهاية</dt>
                                            <dd t-field="program.end_date"/>

                                            <dt><i class="fa fa-users"/> المقاعد المتاحة</dt>
                                            <dd>
                                                <t t-if="program.is_full">
                                                    <span class="badge bg-danger">البرنامج ممتلئ</span>
                                                </t>
                                                <t t-else="">
                                                    <span class="badge bg-success">
                                                        <t t-esc="program.available_seats"/> من <t t-esc="program.max_capacity"/>
                                                    </span>
                                                </t>
                                            </dd>

                                            <t t-if="program.instructor_id">
                                                <dt><i class="fa fa-user-circle"/> المدرب</dt>
                                                <dd t-field="program.instructor_id"/>
                                            </t>
                                        </dl>

                                        <div class="text-center mt-4">
                                            <t t-if="program.state == 'open' and not program.is_full">
                                                <a t-att-href="'/programs/%s/register' % slug(program)"
                                                   class="btn btn-success btn-lg btn-block">
                                                    <i class="fa fa-pencil-square-o"/> سجل الآن
                                                </a>
                                            </t>
                                            <t t-elif="program.is_full">
                                                <button class="btn btn-secondary btn-lg btn-block" disabled="disabled">
                                                    <i class="fa fa-ban"/> البرنامج ممتلئ
                                                </button>
                                            </t>
                                            <t t-elif="program.state != 'open'">
                                                <button class="btn btn-secondary btn-lg btn-block" disabled="disabled">
                                                    <i class="fa fa-lock"/> التسجيل مغلق
                                                </button>
                                            </t>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>
</odoo>